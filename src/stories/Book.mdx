import { Meta, Canvas, Story, Controls } from '@storybook/blocks';
import * as BookStories from './Book.stories.jsx';

<Meta 
  of={BookStories}
  argTypes={{
    image: {
      control: 'text',
      description: 'URL de la imagen de portada. Si falla o se deja vacía, mostrará el título como fallback.',
    },
  }}
/>

# Book Card (Tarjeta de Libro)

El componente `Book` es una tarjeta individual diseñada para representar la información esencial de un libro dentro de un catálogo o listado. Muestra la portada, el título y una breve sinopsis en una estructura semántica y accesible.

Este componente es "tonto" (dumb component), lo que significa que solo se encarga de mostrar visualmente los datos que recibe por props y no maneja estado interno ni lógica de negocio compleja.

## Ejemplo Interactivo (Playground)

Utiliza los controles inferiores para modificar el título, la imagen y la sinopsis en tiempo real y ver cómo responde la tarjeta.

<Canvas>
  <Story 
    name="Playground"
    args={{
      title: 'Don Quijote de la Mancha',
      // Usamos la variable que definimos arriba con tu imagen local
      image: "/images/el-principito.jpg",
      synopsis: 'El ingenioso hidalgo don Quijote de la Mancha narra las aventuras de Alonso Quijano, un hidalgo pobre que de tanto leer novelas de caballería acaba enloqueciendo.',
    }}
  />
</Canvas>

## Propiedades (Props)

El componente acepta las siguientes propiedades para renderizar su contenido. Las descripciones se extraen automáticamente del JSDoc del componente.

<Controls />

## Variaciones

### Sinopsis Larga (Long Synopsis)
Es importante verificar cómo maneja el diseño los textos largos para evitar desbordamientos visuales no deseados. El componente debería truncar el texto o expandir la tarjeta según el CSS definido en tus clases de utilidad.

<Canvas>
  <Story 
    name="Long Synopsis"
    args={{
      title: 'Cien Años de Soledad',
      image: "/images/el-principito.jpg",
      synopsis: 'Muchos años después, frente al pelotón de fusilamiento, el coronel Aureliano Buendía había de recordar aquella tarde remota en que su padre lo llevó a conocer el hielo. Macondo era entonces una aldea de veinte casas de barro y cañabrava construidas a la orilla de un río de aguas diáfanas que se precipitaban por un lecho de piedras pulidas, blancas y enormes como huevos prehistóricos.',
    }}
  />
</Canvas>

### Sin Imagen (Missing Image Fallback)
Si la URL de la imagen no se proporciona o el enlace está roto, es crucial para la accesibilidad y la UX que se muestre el texto alternativo (`alt`). Este componente usa el `title` como fallback.

<Canvas>
  <Story 
    name="No Image Fallback"
    args={{
      title: 'Libro sin portada disponible',
      image: '', // Simulamos una imagen faltante dejándola vacía
      synopsis: 'Este ejemplo muestra cómo se comporta la tarjeta cuando no carga la imagen. Debería verse el texto alternativo.',
    }}
  />
</Canvas>

---

## Accesibilidad (A11y)

Este componente ha sido construido siguiendo buenas prácticas de accesibilidad semántica:

* **Estructura Semántica (`<article>`)**: Se utiliza la etiqueta `<article>` para indicar que el contenido es una composición independiente.
* **Etiquetado ARIA (`aria-label`)**: El contenedor principal recibe el título del libro como etiqueta para lectores de pantalla.
* **Agrupación Multimedia (`<figure>`)**: Se usa `<figure>` y `<figcaption>` para asociar la imagen con su título.
* **Leyenda Oculta (`sr-only`)**: El título en el `<figcaption>` está oculto visualmente pero disponible para tecnologías de asistencia.
* **Texto Alternativo (`alt`)**: La imagen utiliza el título del libro como su texto alternativo si no puede cargarse visualmente.